<div id="maincontent">

    <div id="themonth" style="display:none">
    
        <div id="calendar-intro">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-offset-1 col-md-11">
                        <h1 style="letter-spacing:6px;font-size:70px;">COTTAGE LABS MARCH 2016 CALENDAR</h1>
                    </div>
                </div>
            </div>
        </div>

        <div id="puzzle">

            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-offset-1 col-md-6">
                        <p>Kudos is a toolset which helps academics promote their work and increase publication impact via social media.</p>
                        <p> 
                           Take a look at <a href="https://www.growkudos.com/publications/10.1186%252F1758-2946-5-13" target="_blank">
                           <b>TB mobile for target prediction</b></a> by Dr Sean Ekins <i>et al</i> (10.1186/1758-2946-5-13) - a publication
                           describing a mobile app to help identify new drugs to treat tuberculosis. This work builds on an earlier
                           publication and another app from 2012 about Open Drug Discovery. What is the version number of the Open Drug Discovery
                           Teams app on iTunes?</p>
                        
                        <form class="form-inline">
                            <div class="form-group">
                                <input type="text" class="form-control" id="myguess">
                                <button class="btn btn-success" id="answer">I know the answer!</button>
                            </div>
                        </form>
                        <br>
                        
                        <div id="correct">
                            <p><strong>Correct!</strong></p>
                            
                            <p><a href="https://www.growkudos.com/">Kudos</a> allows researchers to easily share and promote their work,
                            and by linking to online resources, videos and apps, publications have more impact and more visibility. Kudos 
                            is free for researchers - so why not <a href="https://www.growkudos.com/sessions/register" target="_blank">register</a> 
                            and start promoting your work!</p>
                            <p>Cottage Labs have been working with the Kudos team since 2014 to help develop and build the system.</p>
                        </div>
                        
                        <button class="btn btn-danger hint" id="hint1-button">give me a hint</button>
                        <p id="hint1" class="hint"><em>Load <a href="https://www.growkudos.com/publications/10.1186%252F1758-2946-5-13" target="_blank">this article</a> on Kudos then look at the related publications...</em></p>
                        
                        <button class="btn btn-danger hint" id="hint2-button">give me another hint</button>
                        <p id="hint2" class="hint"><em>Find the publication about a mobile app platform for drug discovery published in 2012...</em></p>
                        
                        <button class="btn btn-danger hint" id="hint3-button">give me another hint</button>
                        <p id="hint3" class="hint"><em>Look at the list of Resources...</em></p>
                        
                        <button class="btn btn-danger hint" id="hint4-button">give me one last hint</button>
                        <p id="hint4" class="hint"><em>Click on the link Open Drug Discovery Teams on iTunes...</em></p>   
                        
                    </div>
                    <div class="col-md-4">
                        <img src="/static/calendar/mar-full.jpg" class="img img-thumbnail">
                        Mark, visiting his childhood playground at Doune Carloway Broch, Isle of Lewis
                    </div>
                </div>
            </div>

        </div>
        
    </div>
    <div id="notyet" style="display:none">
        <div id="calendar-intro">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-offset-1 col-md-11">
                        <h1 style="letter-spacing:6px;font-size:70px;">COTTAGE LABS MARCH 2016 CALENDAR</h1>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="holding">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-offset-1 col-md-11">
                        <p>This month's calendar entry isn't available yet.  Check back in March 2016!
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script type="text/javascript">
jQuery(document).ready(function($) {

    $("#correct").hide();
    
    $("#hint1").hide();
    $("#hint2").hide();
    $("#hint3").hide();
    $("#hint4").hide();

    $("#hint2-button").hide();
    $("#hint3-button").hide();
    $("#hint4-button").hide();
    
    $("#hint1-button").click(function(event) {
        event.preventDefault();
        $("#hint1").show();
        $("#hint1-button").hide();
        $("#hint2-button").show();
    });
    
    $("#hint2-button").click(function(event) {
        event.preventDefault();
        $("#hint2").show();
        $("#hint2-button").hide();
        $("#hint3-button").show();
    });
    
    $("#hint3-button").click(function(event) {
        event.preventDefault();
        $("#hint3").show();
        $("#hint3-button").hide();
        $("#hint4-button").show();
    });
    
    $("#hint4-button").click(function(event) {
        event.preventDefault();
        $("#hint4").show();
        $("#hint4-button").hide();
    });
    
    
    // oi
    // you
    // yes, you, looking at the page source
    //
    // these are the allowed answers; but if you could figure that out from the
    // code we bet you could have figured them out from the clue, so just grab
    // one of these strings and stick them in the input box on the page.
    //
    // Or, find the div with id "correct", to see what you would have seen if you'd done that
    //
    // plus, drop us an email at us@cottagelabs.com or a tweet to @cottagelabs to let us know how sneaky you are ;)
    var exact = [
        // values that must match the normalised input exactly
        "0.9.16"
    ];
    var startswith = [
        // values that the normalised input must start with
        "0.9.16"
    ];
    
    function stringStartsWith (string, prefix) {
        return string.slice(0, prefix.length) == prefix;
    }
    
    function normalise(val) {
        val = val.toLowerCase();
        val = val.replace("-", "");
        while (val.indexOf(" ") > -1) {
            val = val.replace(" ", "")
        }
        return val;
    }
    
    $("#answer").click(function(event) {
        event.preventDefault();
        var val = $("#myguess").val();
        val = normalise(val);
        var correct = false;
        for (var i = 0; i < exact.length; i++) {
            if (val === exact[i]) {
                correct = true;
            }
        }
        for (var i = 0; i < startswith.length; i++) {
            if (stringStartsWith(val, startswith[i])) {
                correct = true;
            }
        }
        if (!correct) {
            alert("Unlucky :(  That wasn't the right answer.  Maybe try a hint?");
        } else {
            $("#correct").show();
            $(".hint").hide();
        }
    });
	
    $("#themonth").show();
    /*var d = new Date();
    if ((d.getYear() === 2016 && d.getMonth() >= 2)) {
        $("#themonth").show();
    } else {
        $("#notyet").show();
    }*/
});
</script>

