

<div class="container-fluid" style="max-width:1000px;margin-top:0px;">
  <div class="row">
    <div class="col-md-6">
      <img src="http://static.cottagelabs.com/cottagelabslogo.png" style="width:100%;">
      <h2>URL shortener</h2>
    </div>
    
    <div class="col-md-6">
      <div class="well">
        <p>
          <b>ctg.li/</b> 
          <input id="url" type="text" class="form-control" placeholder="Your URL here">
          <input id="address" type="text" class="form-control" placeholder="Your shortname here">
          <a id="shorten" class="btn btn-default btn-block" href="#">Shorten it!</a>
        </p>
      </div>
      <p>(If the shortname you want is taken, we'll let you know.)</p>
    
      <div id="conf">
        
      </div>
    </div>
  </div>
</div>

<script>
jQuery(document).ready(function() {
  var shorten = function(event) {
    event.preventDefault();
    $('#conf').html("");
    var url = $('#url').val();
    if (url) {
      var address = $('#address').val();
      if (!address) address = 'random';
      $.ajax({
        type:'POST',
        url:'http://ctg.li/' + address,
        data: JSON.stringify({ url: url }),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        cache: false,
        success: function(data) {          
          var conf = '<div class="well">';
          conf += '<p>Your shortlink has been created, and your link is:<br>';
          conf += '<a target="_blank" href="http://ctg.li/' + data.data + '">http://ctg.li/' + data.data + '</a><br></p>';
          conf += '</div>';
          $('#conf').html(conf);
        },
        error: function() {
          var conf = '<div class="well">';
          conf += '<p>Sorry, the shortname you wanted is not available. Please try again with another, or leave it blank to get a random one.</p>'
          conf += '</div>';
          $('#conf').html(conf);          
        }
      });
    } else {
      alert('Please provide a URL for your short link to redirect to first.');
    }
  }
  $('#shorten').bind('click',shorten);
});
</script>
