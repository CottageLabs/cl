<div id="maincontent">

    <div id="themonth" style="display:none">
    
        <div id="calendar-intro">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-offset-1 col-md-11">
                        <h1 style="letter-spacing:6px;font-size:70px;">COTTAGE LABS APRIL 2016 CALENDAR</h1>
                    </div>
                </div>
            </div>
        </div>

        <div id="puzzle">

            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-offset-1 col-md-6">
                        <p>Graphs can be a very powerful tool when used correctly. They can, however, also be misleading.</p>
                        <p>Let's take the number of journals per subject from a selection of subjects as listed in
                            <a href="http://www.journaltocs.ac.uk/index.php?action=browse&subAction=subj&sorType=&sorCol=1&fkHeadID=&pageb=&letter=">JournalTOCs</a>.
                        Let's also take a look at the number of journals for the same subjects in the
                            <a href="https://doaj.org/search?source=%7B%22query%22%3A%7B%22filtered%22%3A%7B%22filter%22%3A%7B%22bool%22%3A%7B%22must%22%3A%5B%7B%22term%22%3A%7B%22_type%22%3A%22journal%22%7D%7D%5D%7D%7D%2C%22query%22%3A%7B%22match_all%22%3A%7B%7D%7D%7D%7D%2C%22from%22%3A0%2C%22size%22%3A10%7D#.Vt_18tyLSkC">
                                DOAJ</a>. The DOAJ is considered a primary source of a journal's Open Access status, so for this puzzle
                        we assume the number of journals in the DOAJ is the number of OA journals for the subject.</p>
                        <p> With this in mind, take a look at the graph below. Which subject gives you the highest odds of picking an OA journal at random?</p>
                        <iframe width="759" height="477" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1osARtzOmVlhFci-BmobiSPne4l7K9eNe0AGy02DDVyc/pubchart?oid=1944150253&amp;format=interactive"></iframe>
                        
                        <form class="form-inline">
                            <div class="form-group">
                                <input type="text" class="form-control" id="myguess">
                                <button class="btn btn-success" id="answer">I know the answer!</button>
                            </div>
                        </form>
                        <br>
                        
                        <div id="correct">
                            <p><strong>Correct!</strong></p>
                            
                            <p>Good job! As the graph below shows, the probabilty of a journal being Open Access is highest in Agriculture.</p>
                            <iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1osARtzOmVlhFci-BmobiSPne4l7K9eNe0AGy02DDVyc/pubchart?oid=1025506163&amp;format=interactive"></iframe>
                        </div>
                        
                        <button class="btn btn-danger hint" id="hint1-button">give me a hint</button>
                        <p id="hint1" class="hint"<em>It's not all about the size</em></p>
                        
                        <button class="btn btn-danger hint" id="hint2-button">give me another hint</button>
                        <p id="hint2" class="hint"><em>Look at the orange bars in relation to the blue ones</em></p>
                        
                        <button class="btn btn-danger hint" id="hint3-button">give me another hint</button>
                        <p id="hint3" class="hint"<em>You could always calculate the probability...</em></p>
                        
                        <button class="btn btn-danger hint" id="hint4-button">give me one last hint</button>
                        <p id="hint4" class="hint"><em>Maybe this graph can help?
                            <br>
                            <iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1osARtzOmVlhFci-BmobiSPne4l7K9eNe0AGy02DDVyc/pubchart?oid=1025506163&amp;format=interactive"></iframe></em></p>
                        
                    </div>
                    <div class="col-md-4">
                        <img src="/static/calendar/apr-full.jpg" class="img img-thumbnail">
                        Nev and Emanuil, viewing "Expectation" in Helsinki, Finland
                    </div>
                </div>
            </div>

        </div>
        
    </div>
    <div id="notyet" style="display:none">
        <div id="calendar-intro">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-offset-1 col-md-11">
                        <h1 style="letter-spacing:6px;font-size:70px;">COTTAGE LABS APRIL 2016 CALENDAR</h1>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="holding">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-offset-1 col-md-11">
                        <p>This month's calendar entry isn't available yet.  Check back in April 2016!
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script type="text/javascript">
jQuery(document).ready(function($) {

    $("#correct").hide();
    
    $("#hint1").hide();
    $("#hint2").hide();
    $("#hint3").hide();
    $("#hint4").hide();

    $("#hint2-button").hide();
    $("#hint3-button").hide();
    $("#hint4-button").hide();
    
    $("#hint1-button").click(function(event) {
        event.preventDefault();
        $("#hint1").show();
        $("#hint1-button").hide();
        $("#hint2-button").show();
    });
    
    $("#hint2-button").click(function(event) {
        event.preventDefault();
        $("#hint2").show();
        $("#hint2-button").hide();
        $("#hint3-button").show();
    });
    
    $("#hint3-button").click(function(event) {
        event.preventDefault();
        $("#hint3").show();
        $("#hint3-button").hide();
        $("#hint4-button").show();
    });
    
    $("#hint4-button").click(function(event) {
        event.preventDefault();
        $("#hint4").show();
        $("#hint4-button").hide();
    });
    
    
    // oi
    // you
    // yes, you, looking at the page source
    //
    // these are the allowed answers; but if you could figure that out from the
    // code we bet you could have figured them out from the clue, so just grab
    // one of these strings and stick them in the input box on the page.
    //
    // Or, find the div with id "correct", to see what you would have seen if you'd done that
    //
    // plus, drop us an email at us@cottagelabs.com or a tweet to @cottagelabs to let us know how sneaky you are ;)
    var exact = [
        // values that must match the normalised input exactly
            "Agriculture", "agriculture"
    ];
    var startswith = [
        // values that the normalised input must start with
        "Agriculture", "agriculture"
    ];
    
    function stringStartsWith (string, prefix) {
        return string.slice(0, prefix.length) == prefix;
    }
    
    function normalise(val) {
        val = val.toLowerCase();
        val = val.replace("-", "");
        while (val.indexOf(" ") > -1) {
            val = val.replace(" ", "")
        }
        return val;
    }
    
    $("#answer").click(function(event) {
        event.preventDefault();
        var val = $("#myguess").val();
        val = normalise(val);
        var correct = false;
        for (var i = 0; i < exact.length; i++) {
            if (val === exact[i]) {
                correct = true;
            }
        }
        for (var i = 0; i < startswith.length; i++) {
            if (stringStartsWith(val, startswith[i])) {
                correct = true;
            }
        }
        if (!correct) {
            alert("Unlucky :(  That wasn't the right answer.  Maybe try a hint?");
        } else {
            $("#correct").show();
            $(".hint").hide();
        }
    });

    $("#themonth").show();
    /*var d = new Date();
    if ((d.getYear() === 2016 && d.getMonth() >= 3)) {
        $("#themonth").show();
    } else {
        $("#notyet").show();
    }*/
});
</script>

